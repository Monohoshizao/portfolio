@use 'sass:map';
@use 'sass:math';
@use 'sass:meta';

// ◯clamp
@function fcp($max, $min: null) {

	// 最小値が未指定なら自動計算
	@if $min==null {
		$min: math.round($max * 0.75);
	}

	$slope: math.div(($max - $min), (1440 - 769)) * 100;
	$intercept: $min - ($slope * 7.69);

	@return clamp(#{$min}px,
		#{$intercept}px + #{$slope}vw,
		#{$max}px);
}

@function fcs($min, $max: null) {

	// 最小値が未指定なら自動計算
	@if $max==null {
		$max: math.ceil($min * 1.3);
	}

	$slope: math.div(($max - $min), (600 - 360)) * 100;
	$intercept: $min - ($slope * 3.6);

	@return clamp(#{$min}px,
		#{$intercept}px + #{$slope}vw,
		#{$max}px);
}

// ◯メディアクエリ
$breakpoints: (sp: 450px,
	tab: 768px,
	pc: 769px);

@mixin mq($key, $type: max) {
	// キーがmapに存在しているか確認（true/false）
	$is-map-key: meta.type-of($key)=='string'and map.has-key($breakpoints, $key);

	// ブレークポイント値を取得（直接数値ならそのまま使う）
	$breakpoint: if($is-map-key, map.get($breakpoints, $key), $key);

	@if $breakpoint==null {
		@error "‘#{$key}’ は定義されていないブレークポイント、または不正な値です";
	}

	$query: if($type==min, min-width, max-width);

	@media screen and (#{$query}: #{$breakpoint}) {
		@content;
	}
}